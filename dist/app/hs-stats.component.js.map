{"version":3,"file":"hs-stats.component.js","sourceRoot":"","sources":["hs-stats.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CardsService } from './cards.service';\r\nimport { InfosService } from './infos.service';\r\nimport { Card } from './card';\r\nimport { Infos } from './infos';\r\nimport { StatsComponent} from './stats/stats.component';\r\nimport {CardFinderComponent} from './card-finder/card-finder.component';\r\n\r\n\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'hs-stats-app',\r\n  templateUrl: 'hs-stats.component.html',\r\n  styleUrls: ['hs-stats.component.css'],\r\n  directives: [StatsComponent,CardFinderComponent],\r\n  providers: [\r\n    CardsService,InfosService\r\n  ]\r\n})\r\nexport class HSStatsAppComponent  implements OnInit{\r\n  title = 'hs-stats works!';\r\n  allCards = []\r\n  sets : Object[] = [];\r\n  infos : Infos;\r\n  error: any;\r\n\r\n  public query = '';\r\n  public countries = [];\r\n    public filteredList = [];\r\n    public elementRef;\r\n\r\n  constructor( private cardsService: CardsService,  private infosService: InfosService) {}\r\n\r\n  getCardsBySet(set) {\r\n    this.cardsService\r\n        .getCardsBySet(set)\r\n        .then(response => this.test2(response, set) );\r\n  }\r\n  test2(response, set){\r\n    this.sets = [...this.sets, {\"name\" : set, \"cards\" :response}];\r\n\r\n    response.forEach(function(element){\r\n      this.countries.push(element.name);\r\n      this.allCards = [...this.allCards, element];\r\n    }.bind(this));\r\n  }\r\n  getInfos(){\r\n    this.infosService\r\n        .getInfos()\r\n        .then(res => this.test(res));\r\n  }\r\n\r\n  test(res){\r\n    this.infos = res;\r\n    this.infos.sets.forEach(function(element, index, array) {\r\n      if(element !== \"Slush\" && element !== \"Promo\" && element !== \"Missions\" && element !== \"Credits\" && element !== \"System\" && element !== \"Hero Skins\" && element !== \"Tavern Brawl\"){\r\n          this.getCardsBySet(element);\r\n      }\r\n\r\n    }.bind(this));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getInfos();\r\n  }\r\n  filter() {\r\n      if (this.query !== \"\"){\r\n          this.filteredList = this.countries.filter(function(el){\r\n              return el.toLowerCase().indexOf(this.query.toLowerCase()) > -1;\r\n          }.bind(this));\r\n      }else{\r\n          this.filteredList = [];\r\n      }\r\n  }\r\n\r\n  select(item){\r\n      this.query = item;\r\n      this.filteredList = [];\r\n  }\r\n\r\n  handleClick(event){\r\n   var clickedComponent = event.target;\r\n   var inside = false;\r\n   do {\r\n       if (clickedComponent === this.elementRef.nativeElement) {\r\n           inside = true;\r\n       }\r\n      clickedComponent = clickedComponent.parentNode;\r\n   } while (clickedComponent);\r\n    if(!inside){\r\n        this.filteredList = [];\r\n    }\r\n  }\r\n\r\n}\r\n"]}